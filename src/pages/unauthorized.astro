---
import BaseLayout from "../layouts/BaseLayout.astro";

const user = await Astro.locals.currentUser();
if (user) {
    const userEmail = user?.emailAddresses?.[0]?.emailAddress;
    if (
        userEmail &&
        userEmail.toLowerCase() === "sophiogabatashvili@gmail.com"
    ) {
        return Astro.redirect("/wedding");
    }
}
---

<BaseLayout>
    <div
        class="flex flex-col items-center justify-center min-h-[60vh] text-center p-4"
    >
        <h1 class="text-4xl font-bold text-red-600 mb-4">Access Restricted</h1>
        <p class="text-lg text-gray-700 mb-8">
            Your email is not on the allowlist for this private dashboard.
        </p>
        <a
            href="/login"
            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
        >
            Switch Account
        </a>
    </div>
</BaseLayout>
