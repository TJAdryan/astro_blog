---
import BaseLayout from '../layouts/BaseLayout.astro';
import { SignIn } from '@clerk/astro/components';
import fs from 'node:fs';
import path from 'node:path';

let count = 0;
try {
  const logPath = path.resolve('./src/data/completed_log.json');
  if (fs.existsSync(logPath)) {
    const data = fs.readFileSync(logPath, 'utf-8');
    const log = JSON.parse(data);
    count = log.length;
  }
} catch (e) {
  console.error('Error reading completed log:', e);
}
---

<BaseLayout>
  <div className="flex flex-col justify-center items-center min-h-[60vh]">
    <div className="mb-8 text-center">
        <h2 className="text-2xl font-bold text-gray-800">{count}</h2>
        <p className="text-gray-600">Articles Completed</p>
    </div>
    <SignIn path="/login" routing="path" signUpUrl="/login" />
  </div>
</BaseLayout>
